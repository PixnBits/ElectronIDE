<!DOCTYPE html>
<html lang="en" ng-app="electron">
<!--

using tree view from
    https://github.com/jonmiles/bootstrap-treeview

using font awesome

-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Electron Arduino IDE</title>

    <!-- Bootstrap -->
    <!-- <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet"> -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet">


    <!-- font awesome -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- source code font -->
    <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:200,300,400,500,600,700,900' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link href='bower_components/angular-bootstrap-nav-tree/dist/abn_tree.css' rel='stylesheet' type='text/css'>


    <link href='styles/nextgen.css' rel='stylesheet' type='text/css'>

  </head>
  <body ng-controller="MainController">
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="jquery.js"></script>
<!-- <script src="mustache.js"></script> -->
<!-- <script src='./ace-builds-master/src-noconflict/ace.js' type='text/javascript' charset='utf-8'></script> -->
<!-- <script src="./ace-builds-master/src-noconflict/ext-language_tools.js"></script> -->
<!-- Include all compiled plugins (below), or include individual files as needed -->
<!-- <script src="bootstrap/js/bootstrap.min.js"></script> -->
<!-- <script src='treeview/src/js/bootstrap-treeview.js'></script> -->



<nav class='navbar navbar-default' role='navigation'>
    <div class='container-fluid'>
        <span class='navbar-brand'>Electron</span>

        <button class='btn btn-default navbar-btn navbar-right' data-toggle='modal' data-target='#settings-modal'
        >Settings <i class="fa fa-gear"></i></button>

        <form class="navbar-form navbar-right">
            <div class="input-group" style="width:200px">
                <input type="text" class="form-control" placeholder="Board" ng-model="boardFilter">
                <div class="input-group-btn">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">{{boards.length ? activeBoard.name || 'Select One' : 'Loading...'}} <span class="caret"></span></button>
                    <ul class="dropdown-menu pull-right">
                      <li ng-repeat="board in boards | filter:boardFilter">
                        <a href="#" ng-click="setActiveBoard(board)">{{board.name}}</a>
                      </li>
                      <li class="divider"></li>
                      <li><a href="#">Other...</a></li>
                    </ul>

                </div>
            </div>
        </form>

        <form class="navbar-form navbar-right" role="search">
            <div class="btn-group" id='port-selector'>
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                 port: <b class='data'>{{ports.length ? activePort.comName || 'Select One' : 'Loading...'}}</b> <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                <li ng-repeat="port in ports">
                  <a href="#" ng-click="setActivePort(port);">{{port.comName}}</a>
                </li>
              </ul>
            </div>
        </form>

        <form class="navbar-form navbar-left" role="search">
            <button class='btn btn-default btn-info' id='compile-code'>Check <i class="fa fa-check"></i></button>
            <button class='btn btn-default btn-success' id='run-code'>Run  <i class="fa fa-play"></i></button>
        </form>
    </div>
</nav>

<div class='scrollpane' id='sketch-info'>
    <h4 class='header'>YourSketch</h4>
    <h5>Libraries</h5>
    <ul class='list-group' style='margin:3px'>
        <li class='list-group-item'><a href='#'>AccelStepper</a></li>
        <li class='list-group-item'><a href='#'>Servo</a></li>
        <li class='list-group-item'><a href='#'>Adafruit BLE</a></li>
    </ul>
    <button class='btn btn-default btn-xs' data-toggle='modal' data-target='#add-library-modal'>Add Library</button>
    <button class='btn btn-default btn-xs'>Remove</button>
</div>
<div class='col-md-12 scrollpane' id='filebrowser' ng-controller="SketchController">
    <h4 class='header'>Sketches</h4>
    <abn-tree
      tree-data="sketches"
      on-select="treeFocus(branch)"
    ></abn-tree>
</div>


<div class="scrollpane" id="main" ng-controller="FileEditorController">
  <ul class="nav nav-tabs" role="tablist" id="myTab">
    <li ng-repeat="file in openFiles">
      <a href="#file-{{$index}}" role="tab" data-toggle="tab">{{file.name}}</a>
    </li>
  </ul>

  <div class="tab-content">
    <div ng-repeat="file in openFiles" class="tab-pane" id="file-{{$index}}">
      <div ui-ace="{mode:'c_cpp', theme:'tomorrow'}" ng-model="file.contents">stuff</div>
    </div>
  </div>
</div>



<div id='info-sidebar' class='panel panel-default scrollpane'>

    <ul class="nav nav-pills panel-heading" role="tablist">
      <li ng-repeat="(portName, portData) in openedPorts">
        <a href='#serial-{{portName}}' role="tab" data-toggle="tab">
          console({{portName}})
          <span style="color:red" ng-click="closeSerialPort(portName)">Ã—</span>
        </a>
      </li>
      <li><a href='#board-info' role="tab" data-toggle="tab">board info</a></li>
    </ul>

    <div class="tab-content">

      <div ng-repeat="(portName, portData) in openedPorts" id='serial-{{portName}}' class='tab-pane active vfill serial-out'>{{portData.log.join('')}}</div>

      <div id='board-info' class='tab-pane'>
        <span ng-show="!!activeBoard">
          <h4>{{activeBoard.name}}</h4>
          <dl class='dl-horizontal'>
              <dt>CPU</dt><dd>{{activeBoard.build.mcu}}</dd>
              <dt>Operating Voltage</dt><dd>{{activeBoard.info.power.operating}}V</dd>
              <dt>Flash Memory</dt><dd>{{activeBoard.info.memory.flash}} KB</dd>
              <dt>SRAM</dt> <dd>{{activeBoard.info.memory.sram}} KB</dd>

              <dt ng-repeat-start="(prop, val) in activeBoard.info">{{prop}}</dt>
              <dd ng-repeat-end>{{val}}</dd>
          </dl>
          <h4>PINS</h4>
          <dl class='dl-horizontal'>
              <dt>D0</dt><dd>Digital 1</dd>
              <dt>A0</dt><dd>Analog 0, D14</dd>
              <dt>A1</dt><dd>Analog 1, D15</dd>
          </dl>
          <pre>{{activeBoard|json:pretty}}</pre>
        </span>
        <span ng-hide="!!activeBoard">Please select a board from the dropdown above.</span>
      </div>

    </div>
</div>

<div class="modal fade" id='settings-modal'>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Settings</h4>
      </div>
      <div class="modal-body">
        <p>The settings will go here</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" id='add-library-modal'>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Add Library</h4>
      </div>
      <div class="modal-body">
          <form>
              <div class="input-group">
                  <input type="text" class="form-control" placeholder="wiring">
                  <div class="input-group-btn">
                      <button class='btn btn-default'>Search</button>
                  </div>
              </div>
          </form>

            <div class="list-group">
                <a href="#" class="list-group-item">
                    <h4 class="list-group-item-heading">Adafruit RGB Pixel</h4>
                    <p class="list-group-item-text">Controls three types of Adafruit RGB Pixels. AVR only</p>
                </a>
                <a href="#" class="list-group-item">
                    <h4 class="list-group-item-heading">TIM Grid</h4>
                    <p class="list-group-item-text">TIM LED matrix board</p>
                </a>
                <a href="#" class="list-group-item">
                    <h4 class="list-group-item-heading">Lightbulb</h4>
                    <p class="list-group-item-text">Dimmer control for incandescent light bulbs</p>
                </a>
            </div>


      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<script src="/socket.io/socket.io.js"></script>

<!-- Drag 'n' Drop panels (save to settings) -->
<!-- <script src="bower_components/jquery-ui/ui/core.js"></script>
<script src="bower_components/jquery-ui/ui/mouse.js"></script>
<script src="bower_components/jquery-ui/ui/widget.js"></script>
<script src="bower_components/jquery-ui/ui/draggable.js"></script> -->

<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

<script src="bower_components/ace-builds/src-min-noconflict/ace.js"></script>
<script src="bower_components/ace-builds/src-min-noconflict/mode-c_cpp.js"></script>
<script src="bower_components/ace-builds/src-min-noconflict/theme-tomorrow.js"></script>

<script src="bower_components/angular/angular.js"></script>
<script src="bower_components/angular-ui-ace/ui-ace.js"></script>
<script src="bower_components/angular-bootstrap-nav-tree/dist/abn_tree_directive.js"></script>
<script src="scripts/electron.js"></script>

<script type='text/javascript'>
  /*
    $(document).ready(function() {
        $("#compile-code").click(function(e) {
            e.preventDefault();
            $("#compile-code i").addClass('fa-spinner').addClass('fa-spin');
            setTimeout(function() {
                $("#compile-code i").removeClass('fa-spinner').removeClass('fa-spin');
            },2000);
        })
        $("#run-code").click(function(e) {
            e.preventDefault();
            $("#run-code i").addClass('fa-spinner').addClass('fa-spin');
            setTimeout(function() {
                $("#run-code i").removeClass('fa-spinner').removeClass('fa-spin');
            },2000);
        })
        $(".tabs a").click(function(e) {
            e.preventDefault();
            var target = $(this).attr('href');
            console.log("clicked to load",target);
            $('.tabpane.active').removeClass('active');
            $(target).addClass('active');

        });

        var langTools = ace.require("ace/ext/language_tools");
        var editor = ace.edit('editor');
        editor.setOptions({
            enableBasicAutocompletion: true,
        });
        editor.setTheme('ace/theme/tomorrow');
        editor.getSession().setMode('ace/mode/c_cpp');
        editor.getSession().setUseWrapMode(true);

    });
  //*/
</script>

</body>
</html>
